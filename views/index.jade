//CopyRight Tag Solutions Pvt.Ltd 2013
doctype 5
html
    head(lang="en")
        title LSR
        link(rel='stylesheet', href='/stylesheets/index1.css')
        link(rel='stylesheet', href='/stylesheets/jslider.css')
        link(rel='stylesheet', href='/stylesheets/jslider.round.css')
        link(rel='stylesheet', href='/stylesheets/jquery.bxslider.css')
        link(rel="stylesheet", href='/stylesheets/colorbox.css')
        link(rel="stylesheet", href='/stylesheets/jquery.nouislider.min.css')
        script(type='text/javascript', src='/javascripts/jquery-1.7.1.js')
        script(type='text/javascript', src='/javascripts/jshashtable-2.1_src.js')
        script(type='text/javascript', src='/javascripts/jquery.numberformatter-1.2.3.js')
        script(type='text/javascript', src='/javascripts/tmpl.js')
        script(type='text/javascript', src='/javascripts/jquery.dependClass-0.1.js')
        script(type='text/javascript', src='/javascripts/draggable-0.1.js')
        script(type='text/javascript', src='/javascripts/jquery.slider.js')
        script(type='text/javascript', src='/javascripts/jquery.bxslider.min.js')
        script(type='text/javascript', src='/javascripts/jquery.colorbox-min.js')
        script(type='text/javascript', src='/javascripts/jquery.nouislider.min.js')
        script(type='text/javascript', src='/javascripts/main.js')
        script(type='text/javascript', src="https://www.google.com/jsapi?autoload={'modules':[{name:'maps',version:3,other_params:'libraries=places%26sensor=false'}]}")
    body
        div#bigWarpper
            script.
                var selectedProp,
                    populateValues,
                    loginoutLable;
            div#header
                ul
                    li
                        p#logo
                            a(href="/") LSR
                    li
                        div#map
                            a(href="/")
                                img(src="/images/maps_button1.png",style="margin-right:7px;")
                                | Map
                        div#list
                            a(href="/properties")
                                img(src="/images/listicon_bluepng.png",style="margin-right:10px;")
                                | List
                    li
                        nav#mainNav
                            ul
                                li: a(href="/", style="text-decoration: none")
                                    abbr#navText HOME
                                li: a(href="/properties", style="text-decoration: none")
                                    abbr#navText PROPERTY
                                li: a(href="/properties/add", style="text-decoration: none")
                                    abbr#navText ADD
                                li#loginid: a(class="group1", href="#box1", style="text-decoration: none")
                                    | LOGIN
                                li: a#username
            div#mainBody
                ul
                    li.propertiesListContainer
                        form#searchForm(action='/search',method='POST')
                            div#choosePropertyType
                                ul
                                    input(type='button', class='selector', id='all', value='All')
                                    input(type='button', class='selector', id='rent', value='Rent')
                                    input(type='button', class='selector', id='sale', value='Sale')
                                    input(type='button', class='selector', id='selectorLast', value='Timeshare')
                                    input(type='hidden', name='prop_type', id='chosenType', value="")
                                    script.
                                            $('.selector').click(function(){
                                                $('.selector').css('background', '#ffffff');
                                                $('.selector').css('color', '#000000');
                                                $(this).css('color', '#ffffff');
                                                $(this).css('background', '#606060');
                                                var hahaha=$(this).attr("value");

                                                document.getElementById("chosenType").value=hahaha;
                                            });
                            p#place
                                a Location
                                br
                                input#location(type="text", name="location")

                            p#priceRange
                                a Price Range(USD)
                                br
                                input#minPrice(type="text", name="min_price",pattern="[0-9]*")
                                |to
                                input#maxPrice(type="text", name="max_price",pattern="[0-9]*")
                            p#bedRooms
                                br
                                a Bedrooms
                                br
                                //input#BedroomsSlider(type="slider", value="2", name="bedrooms", style="display:block;")
                                div(style="width: 83%;height: 20px;border: 1px solid #d9d9d9;margin:0 auto;background:#fff;border-radius:3px;")
                                    div.noUiSlider(style="width: 180px;height: 20px; margin: 0 auto")
                                    script(type='text/javascript', charset='utf-8').
                                        var inp1= $('.noUiSlider').parent().find('[name="bedrooms"]')
                                        $('.noUiSlider').noUiSlider({
                                        range: [1,5],
                                        start: 1,
                                        handles: 1,
                                        connect: false,
                                        step:1,
                                        serialization: {
                                        to: ["bedrooms",inp1],
                                        // round to 0 decimals
                                            resolution: 1
                                        }
                                        });
                            p#bathrooms
                                br
                                a Bathrooms
                                br
                                //input#BathroomsSlider(type="slider", value="2", name="bathrooms", style="display:block;")
                                div(style="width: 83%;height: 20px;border: 1px solid #d9d9d9;margin:0 auto;background:#fff;border-radius:3px;")
                                    div.noUiSlider2(style="width: 180px;height: 20px; margin: 0 auto")
                                    script(type='text/javascript', charset='utf-8').
                                               var inp2 = $('.noUiSlider').parent().find('[name="bathrooms"]')
                                                $('.noUiSlider2').noUiSlider({
                                                range: [1,5],
                                                start: 1,
                                                handles: 1,
                                                connect: false,
                                                step:1,
                                                serialization: {
                                                to: ["bathrooms",inp2],
                                                // round to 0 decimals
                                                    resolution: 1
                                                }
                                                });
                            div#hidingDiv
                                div#more_search
                                    div#more
                                        p More
                                    div#search
                                        input(type='submit', value='Search',id='searchButton')

                                div#bannerAd
                                    p#bannerAdText Banner Ad

                            script.
                                $(document).ready(function(){
                                    $("#more").click(function(){
                                        $("#hidingDiv").hide();
                                        $("#showingDiv").show();
                                    });
                                    $("#less").click(function(){
                                        $("#hidingDiv").show();
                                        $("#showingDiv").hide();
                                    });
                                    loadCountries('#country', '');
                                });
                            div#showingDiv(style="display: none")
                                div#less
                                    p Less
                                p#place
                                    a Country
                                    br
                                    //input#country(type="text", name="country")
                                    select#country(name="country")
                                        option(value='')
                                p#place
                                    a Postal Code
                                    br
                                    input#zipcode(type="text", name="zipcode")
                                p#place
                                    a Area Within (in Km)
                                    br
                                    input#areaOfSearch(type="text", name="areaOfSearch", id="areaOfSearch")
                                div#reset
                                    script.
                                        function resetFunction(){
                                            document.getElementById("searchForm").reset();
                                        }
                                    a(onclick="resetFunction()")  Reset
                                    div#hide_search
                                        input(type='submit', value='Search',id='searchButton',onsubmit="validateForm()" )

                        li.lastchild
                            aside#mainAside.propertiesListContainer
                                if routePath === "home"
                                    div#MapDiv
                                        script.
                                            var propertyList = JSON.parse( !{JSON.stringify(products)} );
                                            if('#{sort}' == 'Priceh'){
                                                propertyList.sort(function(a, b){
                                                return b.price - a.price;});
                                            }
                                            else if('#{sort}' == 'Pricel'){
                                                propertyList.sort(function(a, b){
                                                return a.price - b.price;});
                                            }
                                            else if('#{sort}' == 'Bedl'){
                                                propertyList.sort(function(a, b){
                                                return a.bedrooms - b.bedrooms;});
                                            }
                                            else if('#{sort}' == 'Batl'){
                                                propertyList.sort(function(a, b){
                                                return a.bathrooms - b.bathrooms;});
                                            }
                                            var mapIndex = #{mapIndex}
                                                , userName = '#{userName}'
                                                , loginidhtml = document.getElementById("loginid").innerHTML;
                                                loginidhtml = (userName.indexOf('Guest') < 0 )? loginidhtml.replace('#box1', '/logout').replace('LOGIN', 'LOGOUT').replace('group1', 'grouptemp') : loginidhtml.replace('/logout', '#box1').replace('LOGOUT', 'LOGIN').replace('grouptemp', 'group1');
                                                $('#username').html('#{userName}');
                                                $('#loginid').html(loginidhtml);
                                                
                                        script(type='text/javascript',src='/javascripts/mapIndex.js')
                                else if routePath === "search"
                                    div#MapDiv2
                                        script.
                                            var map;
                                            var propertyList = JSON.parse( !{JSON.stringify(products)} );
                                            function initialize() {
                                            // Initial Map Options.
                                            var mapOptions = {
                                                zoom:14,
                                                mapTypeId: google.maps.MapTypeId.ROADMAP
                                            };

                                            // Loading Map

                                            map = new google.maps.Map(document.getElementById('MapDiv2'), mapOptions);

                                            // Loading location as per Geolocation
                                            if (navigator.geolocation) {
                                            navigator.geolocation.getCurrentPosition(function (position) {
                                                console.log(propertyList[0].LatLng.latitude+"::"+propertyList[0].LatLng.longitude)
                                                console.log
                                                var pos = new google.maps.LatLng(propertyList[0].LatLng.latitude, propertyList[0].LatLng.longitude);
                                            console.log("----loading---");
                                            // Function for Clustering
                                            // Loading properties in Map using marker array from DB
                                                var markers = [];
                                                var infoWindows = [];
                                                for (var i = 0; i < propertyList.length; i++) {
                                                    var latLng = new google.maps.LatLng(propertyList[i].LatLng.latitude, propertyList[i].LatLng.longitude);
                                                    var marker = new google.maps.Marker({'position': latLng, infoWindowIndex : i});
                                                    var content = '<div id=mapHoverInfo><p style="font-size:14px">'
                                                                    +propertyList[i].address.line1+", "
                                                                    +propertyList[i].address.line2+", "
                                                                    +propertyList[i].address.city+", "
                                                                    +propertyList[i].address.zip
                                                                    +"</p>"
                                                                    +"<ul><li>"+"Type:"+propertyList[i].type+"</li>"
                                                                    +"<li>Price:"+propertyList[i].price+"</li></ul>"
                                                                    +"</div>"
                                                                    +"<div id=mapHoverInfoPicture>"
                                                                    +"<ul><li><p>Beds:"+propertyList[i].bedrooms+"</p>"
                                                                    +"<p>Baths:"+propertyList[i].bathrooms+"</p>"
                                                                    +"<p>Area:"+propertyList[i].area+"sqft</p>"
                                                                    +"<p>Built:2005</p>"
                                                                    +'<p>More:<img width=10 height=10 src="../images/blue%20arrow.png"></p></li>'
                                                                    +'<li>'+'<img width=100 height=100 src='+propertyList[i].picture+'>'+'</li></ul></div>'
                                                                    +"<div id=mapHoverInfoOptions>"
                                                                    +'<ul><li><img width=35 height=35 src="../images/button.png"></li>'
                                                                    +'<li><img width=35 height=35 src="../images/save.png"></li>'
                                                                    +'<li><img width=35 height=35 src="../images/select.png"></li>'
                                                                    +'<li><img width=33 height=33 src="../images/messgae.png"></li></ul>'
                                                                    +"</div>";
                                                    var infoWindow = new google.maps.InfoWindow({
                                                        content : content
                                                    });
                                                    google.maps.event.addListener(marker, 'click',
                                                        function(event)
                                                        {
                                                            infoWindows[this.infoWindowIndex].open(map, this);
                                                        }
                                                    );
                                                    /*
                                                    google.maps.event.addListener(marker, 'mouseout',
                                                        function(event)
                                                        {
                                                            infoWindows[this.infoWindowIndex].close();
                                                        }
                                                    );*/
                                                    infoWindows.push(infoWindow);
                                                    markers.push(marker);
                                                }
                                                var markerCluster = new MarkerClusterer(map, markers, mapOptions);
                                            // End of Clustering

                                            // Setting up the Map position.
                                                map.setCenter(pos);

                                            // Function for Places.
                                            // Not sure about Markers array please go through it when time permits
                                            // End of the Places Library

                                            // Reverse Geocoder function to get location city and state in Readable format
                                            // Also populate in area search box

                                                geocoder = new google.maps.Geocoder();
                                            var location = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
                                            geocoder.geocode({'location': location }, function (results, status) {

                                            if (status == google.maps.GeocoderStatus.OK) {
                                            //Check result 0
                                            var result = results[0];
                                            //look for locality tag and administrative_area_level_1
                                            var city = "";
                                            var state = "";
                                            var postalCode= "";
                                            for (var i = 0, len = result.address_components.length; i < len; i++) {

                                            var ac = result.address_components[i];
                                            if (ac.types.indexOf("locality") >= 0) city = ac.long_name;
                                            if (ac.types.indexOf("administrative_area_level_1") >= 0) state = ac.short_name;
                                            if (ac.types.indexOf("postal_code") >= 0) postalCode = ac.long_name;

                                            }
                                            //only report if we got Good Stuff
                                            if (city != '' && state != '') {
                                            document.getElementById("serachFunctionComboBox").value = city + ',' + state;
                                            document.getElementById("serachFunctionInputText").value = postalCode;
                                                } else {
                                                    console.log('Geocoder failed' + status)
                                                    }
                                                    }
                                                    });
                                            }, function () {
                                                handleNoGeolocation(true);
                                            });
                                            }
                                            else {
                                            handleNoGeolocation(false);
                                            }
                                            }

                                            // Test for Geolocation.

                                            function handleNoGeolocation(errorFlag) {
                                            if (errorFlag) {
                                                var content = 'Error: The Geolocation service failed.';
                                            } else {
                                                var content = 'Error: Your browser doesn\'t support geolocation.';
                                            }
                                            var options = {
                                                map: map,
                                                position: new google.maps.LatLng(60, 105),
                                                content: content
                                            };
                                            var infowindow = new google.maps.InfoWindow(options);
                                            map.setCenter(options.position);
                                            }

                                            // Loading main Javascript for Map


                                            function loadScript() {
                                                var script = document.createElement('script');
                                                script.type = 'text/javascript';
                                                script.src = 'https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&' +
                                                    'callback=initialize&libraries=geometry&libraries=places';
                                                document.body.appendChild(script);
                                            }

                                            window.onload = loadScript;
                                else if routePath === "prod"
                                    div#MapDiv
                                        ul
                                            li.propertiesListScroll
                                                a#result
                                                    script.
                                                        var propertyList = JSON.parse( '!{JSON.stringify(products)}' );
                                                        document.write(propertyList.length+" results");
                                                div#sort
                                                    label
                                                    select#mySelect(onchange="priceRange()")
                                                        option(value="Priceh") Sort: Price High-Low
                                                        option(value="Pricel") Sort: Price Low-High
                                                        option(value="Timen") Sort: Time - Newest-Oldest
                                                        option(value="Timeo") Sort: Time - Oldest-Newest
                                                        option(value="Bedl") Sort: Bedrooms Low-High
                                                        option(value="Batl") Sort: Bathrooms Low-High
                                                    //div#compare(onclick="sortDescendingBybed()") Compare
                                                    div#compare
                                                        a(href="#") Compare
                                                script.
                                                    function priceRange(){
                                                        var mylist=document.getElementById("mySelect");
                                                        var answer = mylist.options[mylist.selectedIndex].value;
                                                        if(answer == "Priceh"){
                                                            sortDescendingByPrice();
                                                        }
                                                        else if(answer == "Pricel"){
                                                            sortAscendingByPrice();
                                                        }
                                                        else if(answer == "Bedl"){
                                                            sortAscendingBybed();
                                                        }
                                                        else if(answer == "Batl"){
                                                            sortAscendingBybath();
                                                        }
                                                    }
                                                div#scroll
                                                    div#list1
                                                        script.
                                                            var propertyList = JSON.parse( '!{JSON.stringify(products)}' );

                                                                function populate(){
                                                                $('#list1').empty();
                                                                $("#result").html(propertyList.length+" results");
                                                                for(var i=0; i < propertyList.length ; i++){
                                                                console.log(propertyList[i].bathrooms);
                                                                document.getElementById("list1").innerHTML += "<br/><div class=propertiesList style=background:url("+propertyList[i].picture.linkFront+")no-repeat;background-size:300px 175px>"
                                                                                                                +"<div id=propertyName>"+propertyList[i].productName+"<a style=float:right;margin-top:-2px;margin-right:20px><input type=checkbox name=property id=cb"+i+" value="+i+"></a></div>"
                                                                                                                +"<div id=propertyPrice class="+i+">$"+propertyList[i].price+"<br /><a> Bed:"+propertyList[i].bedrooms+" Bath:"+propertyList[i].bathrooms+" Sqft:"+propertyList[i].area+"</a><a style=float:right;margin-top:-2px;margin-right:20px><img src=/images/green_arrow.png></div>"
                                                                                                                //+"<div id=arrowKey></div>"
                                                                                                                +"</div></a>" }}

                                                                function sortAscendingByPrice(){
                                                                propertyList.sort(function(a, b){
                                                                return a.price - b.price;})
                                                                console.log(propertyList);
                                                                populate();
                                                                setPropSlider('0');
                                                                }

                                                                function sortDescendingByPrice(){
                                                                    propertyList.sort(function(a, b){
                                                                    return b.price - a.price;})
                                                                    console.log(propertyList);
                                                                    populate();
                                                                    setPropSlider('0');
                                                                }

                                                                function sortAscendingBybed(){
                                                                    propertyList.sort(function(a, b){
                                                                    return a.bedrooms - b.bedrooms;})
                                                                    console.log(propertyList);
                                                                    populate();
                                                                    setPropSlider('0');
                                                                }

                                                                function sortAscendingBybath(){
                                                                    propertyList.sort(function(a, b){
                                                                    return a.bathrooms - b.bathrooms;})
                                                                    populate();
                                                                    setPropSlider('0');
                                                                }
                                                                propertyList.sort(function(a, b){
                                                                    return b.price - a.price;})

                                                                for(var i=0; i < propertyList.length ; i++){
                                                                    console.log(propertyList[i]);
                                                                    document.write("<br/> <div class=propertiesList style=background:url("+propertyList[i].picture.linkFront+")no-repeat;background-size:300px 175px>"
                                                                                                            +"<div id=propertyName>"+propertyList[i].productName+"<a style=float:right;margin-top:-2px;margin-right:20px><input type=checkbox id=cb"+i+" name=property value="+i+"></a></div>"
                                                                                                            +"<div id=propertyPrice class="+i+">$"+propertyList[i].price+"<br /><a> Bed:"+propertyList[i].bedrooms+" Bath:"+propertyList[i].bathrooms+" Sqft:"+propertyList[i].area+"</a><a style=float:right;margin-top:-2px;margin-right:20px><img src=/images/green_arrow.png></div>"
                                                                                                            //+"<div id=arrowKey></div>"
                                                                                                            +"</div></a>"
                                                                                    );
                                                                };
                                                                $(document).ready(function(){
                                                                    populateValues = function(checkValues){
                                                                            selectedProp = checkValues;
                                                                            console.log('checkValues: ' +checkValues.length);
                                                                            $('#comTitle').html('Comparing '+checkValues.length + ' Properties');
                                                                            $('#selectedPropCount').val(checkValues.length);
                                                                            if(checkValues[3] != null){
                                                                                console.log('checkValues[3] :'+checkValues[3]);
                                                                                $('#line0PicIndx').val(0);
                                                                                $('#line1PicIndx').val(1);
                                                                                $('#classPicIndx').val(2);
                                                                                $('#class1PicIndx').val(3);
                                                                                $("#MapDiv").hide();
                                                                                $("#compare_body").show();
                                                                                console.log(checkValues);
                                                                                $(".comslider").html('<img src='+checkValues[0]['picture']['linkFront']+' width=165 height=110/>');
                                                                                $("#comparePrice").html(checkValues[0]['price']);
                                                                                $("#CompareBeds").html(checkValues[0]['bedrooms']);
                                                                                $("#CompareBaths").html(checkValues[0]['bathrooms']);
                                                                                $("#CompareSqft").html(checkValues[0]['area']);
                                                                                $("#CompareType").html(checkValues[0]['productType']);
                                                                                $('.comproductName0').html(checkValues[0]['productName']);     
                                                                                $('.comAddress0').html(checkValues[0]['address']['line1']+',');
                                                                                $('.comAddress01').html(checkValues[0]['address']['city']+', '+checkValues[0]['address']['country']);
                                                                                $(".comslider1").html('<img src='+checkValues[1]['picture']['linkFront']+' width=165 height=110/>');
                                                                                $("#comparePrice1").html(checkValues[1]['price']);
                                                                                $("#CompareBeds1").html(checkValues[1]['bedrooms']);
                                                                                $("#CompareBaths1").html(checkValues[1]['bathrooms']);
                                                                                $("#CompareSqft1").html(checkValues[1]['area']);
                                                                                $("#CompareType1").html(checkValues[1]['productType']);
                                                                                $('.comproductName1').html(checkValues[1]['productName']);     
                                                                                $('.comAddress1').html(checkValues[1]['address']['line1']+',');
                                                                                $('.comAddress11').html(checkValues[1]['address']['city']+', '+checkValues[1]['address']['country']);
                                                                                $(".comslider2").html('<img src='+checkValues[2]['picture']['linkFront']+' width=165 height=110/>');
                                                                                $("#comparePrice2").html(checkValues[2]['price']);
                                                                                $("#CompareBeds2").html(checkValues[2]['bedrooms']);
                                                                                $("#CompareBaths2").html(checkValues[2]['bathrooms']);
                                                                                $("#CompareSqft2").html(checkValues[2]['area']);
                                                                                $("#CompareType2").html(checkValues[2]['productType']);
                                                                                $('.comproductName2').html(checkValues[2]['productName']);     
                                                                                $('.comAddress2').html(checkValues[2]['address']['line1']+',');
                                                                                $('.comAddress21').html(checkValues[2]['address']['city']+', '+checkValues[2]['address']['country']);
                                                                                $(".comslider3").html('<img src='+checkValues[3]['picture']['linkFront']+' width=165 height=110/>');
                                                                                $("#comparePrice3").html(checkValues[3]['price']);
                                                                                $("#CompareBeds3").html(checkValues[3]['bedrooms']);
                                                                                $("#CompareBaths3").html(checkValues[3]['bathrooms']);
                                                                                $("#CompareSqft3").html(checkValues[3]['area']);
                                                                                $("#CompareType3").html(checkValues[3]['productType']);
                                                                                $('.comproductName3').html(checkValues[3]['productName']);     
                                                                                $('.comAddress3').html(checkValues[3]['address']['line1']+',');
                                                                                $('.comAddress31').html(checkValues[3]['address']['city']+', '+checkValues[3]['address']['country']);
                                                                            }else if(checkValues[2] != null){
                                                                                console.log('checkValues[2] :'+checkValues[2]);
                                                                                $('#line0PicIndx').val(0);
                                                                                $('#line1PicIndx').val(1);
                                                                                $('#classPicIndx').val(2);
                                                                                $("#MapDiv").hide();
                                                                                $("#compare_body").show();
                                                                                $("#class1").hide();
                                                                                $(".comslider").html('<img src='+checkValues[0]['picture']['linkFront']+' width=165 height=110/>');
                                                                                $("#comparePrice").html(checkValues[0]['price']);
                                                                                $("#CompareBeds").html(checkValues[0]['bedrooms']);
                                                                                $("#CompareBaths").html(checkValues[0]['bathrooms']);
                                                                                $("#CompareSqft").html(checkValues[0]['area']);
                                                                                $("#CompareType").html(checkValues[0]['productType']);
                                                                                $('.comproductName0').html(checkValues[0]['productName']);     
                                                                                $('.comAddress0').html(checkValues[0]['address']['line1']+',');
                                                                                $('.comAddress01').html(checkValues[0]['address']['city']+', '+checkValues[0]['address']['country']);
                                                                                $(".comslider1").html('<img src='+checkValues[1]['picture']['linkFront']+' width=165 height=110/>');
                                                                                $("#comparePrice1").html(checkValues[1]['price']);
                                                                                $("#CompareBeds1").html(checkValues[1]['bedrooms']);
                                                                                $("#CompareBaths1").html(checkValues[1]['bathrooms']);
                                                                                $("#CompareSqft1").html(checkValues[1]['area']);
                                                                                $("#CompareType1").html(checkValues[1]['productType']);
                                                                                $('.comproductName1').html(checkValues[1]['productName']);     
                                                                                $('.comAddress1').html(checkValues[1]['address']['line1']+',');
                                                                                $('.comAddress11').html(checkValues[1]['address']['city']+', '+checkValues[1]['address']['country']);
                                                                                $(".comslider2").html('<img src='+checkValues[2]['picture']['linkFront']+' width=165 height=110/>');
                                                                                $("#comparePrice2").html(checkValues[2]['price']);
                                                                                $("#CompareBeds2").html(checkValues[2]['bedrooms']);
                                                                                $("#CompareBaths2").html(checkValues[2]['bathrooms']);
                                                                                $("#CompareSqft2").html(checkValues[2]['area']);
                                                                                $("#CompareType2").html(checkValues[2]['productType']);
                                                                                $('.comproductName2').html(checkValues[2]['productName']);     
                                                                                $('.comAddress2').html(checkValues[2]['address']['line1']+',');
                                                                                $('.comAddress21').html(checkValues[2]['address']['city']+', '+checkValues[2]['address']['country']);
                                                                            }else if(checkValues[1] != null){
                                                                                console.log('checkValues[1] :'+checkValues[1]);
                                                                                $('#line0PicIndx').val(0);
                                                                                $('#line1PicIndx').val(1);
                                                                                $("#MapDiv").hide();
                                                                                $("#compare_body").show();
                                                                                $("#class").hide();
                                                                                $("#class1").hide();
                                                                                $(".comslider").html('<img src='+checkValues[0]['picture']['linkFront']+' width=165 height=110/>');
                                                                                $("#comparePrice").html(checkValues[0]['price']);
                                                                                $("#CompareBeds").html(checkValues[0]['bedrooms']);
                                                                                $("#CompareBaths").html(checkValues[0]['bathrooms']);
                                                                                $("#CompareSqft").html(checkValues[0]['area']);
                                                                                $("#CompareType").html(checkValues[0]['productType']);
                                                                                $('.comproductName0').html(checkValues[0]['productName']);     
                                                                                $('.comAddress0').html(checkValues[0]['address']['line1']+',');
                                                                                $('.comAddress01').html(checkValues[0]['address']['city']+', '+checkValues[0]['address']['country']);
                                                                                $(".comslider1").html('<img src='+checkValues[1]['picture']['linkFront']+' width=165 height=110/>');
                                                                                $("#comparePrice1").html(checkValues[1]['price']);
                                                                                $("#CompareBeds1").html(checkValues[1]['bedrooms']);
                                                                                $("#CompareBaths1").html(checkValues[1]['bathrooms']);
                                                                                $("#CompareSqft1").html(checkValues[1]['area']);
                                                                                $("#CompareType1").html(checkValues[1]['productType']);
                                                                                $('.comproductName1').html(checkValues[1]['productName']);     
                                                                                $('.comAddress1').html(checkValues[1]['address']['line1']+',');
                                                                                $('.comAddress11').html(checkValues[1]['address']['city']+', '+checkValues[1]['address']['country']);

                                                                            }else{
                                                                                alert("Select atleast Two properties");
                                                                            }
                                                                        }
                                                                    $(function compare() {
                                                                        $('#compare').click(function () {
                                                                            
                                                                            var checkValues = $('input[name=property]:checked').map(function() {
                                                                                console.log($(this).val());
                                                                                return propertyList[$(this).val()];
                                                                            }).get();
                                                                            populateValues(checkValues);
                                                                        });
                                                                    });
                                                                });

                                                    script.
                                                        $('#map').css('background','#1E9FDD')
                                                        $('#map img').attr('src','/images/map_icon.png')
                                                        $('#map a').css('color','#ffffff')
                                                        $('#map').css('height','24')
                                                        $('#list').css('background','#f1f1f1')
                                                        $('#list img').attr('src','/images/listicon_grey.png')
                                                        $('#list a').css('color','#000000')
                                                        $('#list').css('height','27')
                                            li.zoomedDetails
                                                div#propertyZoomedDetails
                                                    br
                                                    div#sliderHdrAddr
                                                        span#selectButton.select_box
                                                            div#selectButtonDiv
                                                            script.
                                                                    $('#selectButtonDiv').html('<h3>Select</h3>');
                                                                    $('#selectButtonDiv').on('click', function(){
                                                                        $("#cb"+$('#propIdSldrHdr').val()).attr('checked','checked');
                                                                    });
                                                        a.comproductNameSldrHdr
                                                            script.
                                                                        document.write(propertyList[0].productName);
                                                        p.comAddressSldrHdr
                                                            script.
                                                                document.write(propertyList[0].address.line1+', '+propertyList[0].address.line2+', '+propertyList[0].address.city+', '+propertyList[0].address.state+', '+propertyList[0].address.country +' - '+propertyList[0].address.zip);
                                                    script.
                                                        document.write("<div class=\"slider\"> <div class=\"bxslider\">"
                                                                        +"<img src="+propertyList[0].picture.linkFront+" width=580 height=270/>"
                                                                        +"<img src="+propertyList[0].picture.linkBack+" width=580 height=270/>"
                                                                        +"<img src="+propertyList[0].picture.linkLeft+" width=580 height=270/>"
                                                                        +"<img src="+propertyList[0].picture.linkRight+" width=580 height=270/>"
                                                                        +"</div></div>");
                                                    div#description(style="width:100%")
                                                        div#tabs
                                                                    br
                                                                    img(src="/images/maps_button.png")#LocationClick(style="cursor:pointer",class="0", title='Go To Location In Map')
                                                                    &nbsp;&nbsp;
                                                                    img(src="/images/messgae.png")#SendMailClick(style="cursor:pointer",class="0", title='Email Selected Image')
                                                                    &nbsp;&nbsp;
                                                                    img(src="/images/save_button.png")#SaveClick(style="cursor:pointer",class="0", title='Save Selected Image') // chinna
                                                                    &nbsp;&nbsp;
                                                                    img(src="/images/print.png")#PrintClick(style="cursor:pointer",class="0", title='Print Selected Image')
                                                                    &nbsp;&nbsp;
                                                                    img(src="/images/facebook-variation.png")#FacebookShareClick(style="cursor:pointer",class="0", title='Share on FaceBook')
                                                                    &nbsp;&nbsp;
                                                                    img(src="/images/twitter-variation.png")#TwitterShareClick(style="cursor:pointer",class="0", title='Share on Twitter')
                                                                    &nbsp;&nbsp;
                                                                    img(src="/images/linkedin-variation.png")#LinkedinShareClick(style="cursor:pointer",class="0", title='Share on LinkedIn')   
                                                        div#price
                                                            p(style="padding-left:0") Price:
                                                                script.
                                                                    document.write(" $"+propertyList[0].price)
                                                        div#property
                                                            div#property_details
                                                                h4 Property Details
                                                            div#property_types
                                                                ul
                                                                    li#beds Beds:
                                                                        script.
                                                                            document.write(" "+propertyList[0].bedrooms)
                                                                    li#area Area:
                                                                        script.
                                                                            document.write(" "+propertyList[0].area)
                                                                    li Built: 2005
                                                                    li#baths Bath:
                                                                        script.
                                                                            document.write(" "+propertyList[0].bathrooms)
                                                                    li#type Type:
                                                                        script.
                                                                            document.write(" "+propertyList[0].productType)
                                                                    li MLS ID
                                                        div#description_prop
                                                            h4 Descriptions
                                                            p Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat.
                                    input#selectedPropCount(type='hidden', value='')
                                    input#line0PicIndx(type='hidden', value='')
                                    input#line1PicIndx(type='hidden', value='')
                                    input#classPicIndx(type='hidden', value='')
                                    input#class1PicIndx(type='hidden', value='')
                                    input#propIdSldrHdr(type='hidden', value='0')
                                    div#compare_body(style="display:none")
                                        div#compare_header
                                            div#back
                                                a(href="/properties") Back
                                            div#comTitle
                                            div#close
                                                a(href="/properties") Close
                                        div#comparison
                                            div#preNav
                                                br
                                                br
                                                br
                                                br
                                                br
                                                br
                                                br
                                                br
                                                br
                                                br
                                                br
                                                br
                                                br
                                                br
                                                br
                                                script.
                                                    document.write('<div class=\"bx-wrapper\"><div class=\"bx-controls bx-has-controls-direction\"><div class=\"bx-controls-direction\"> <a class=\"bx-prev\">Prev</a></div></div></div>');

                                                        propertyIndexCurrent = 0,
                                                        selectedPropCount = 0,
                                                        propIndex0 = 0,
                                                        propIndex1 = 1,
                                                        propIndex2 = 2,
                                                        propIndex3 = 3;
                                                        //var selectedPropPrev;
                                                    $('#preNav').on('click', function() {
                                                        //propertyIndexCurrent--;
                                                        //if(selectedPropPrev == undefined){
                                                        //    selectedPropPrev = $('input[name=property]:checked').map(function() {
                                                        //                        console.log($(this).val());
                                                        //                        return propertyList[$(this).val()];
                                                        //                    }).get();
                                                        //    console.log('selectedPropPrev.length PREV :'+selectedPropPrev.length);
                                                        //}
                                                        //console.log('checkValues.length PREV :'+selectedPropPrev.length);
                                                        //console.log('selectedCheckValues PREV :'+selectedCheckValues.length);
                                                        //console.log('Selected prop: '+($('#selectedPropCount').val() - 1));
                                                        selectedPropCount = ($('#selectedPropCount').val() - 1);

                                                        
                                                        //propertyIndexCurrent = (propertyIndexCurrent < 0)? selectedPropCount : propertyIndexCurrent;
                                                        
                                                        //console.log('propertyIndexCurrent -PREV : '+propertyIndexCurrent);
                                                        propIndex3 = propIndex2;
                                                        propIndex2 = propIndex1;
                                                        propIndex1 = propIndex0;
                                                        propIndex0--;
                                                        if(propIndex0 < 0){
                                                            propIndex0 = selectedPropCount;
                                                        }

                                                        $('#line0PicIndx').val(propIndex0);
                                                        $('#line1PicIndx').val(propIndex1);
                                                        $('#classPicIndx').val(propIndex2);
                                                        $('#class1PicIndx').val(propIndex3);

                                                        $(".comslider").html('<img src='+selectedProp[propIndex0]['picture']['linkFront']+' width=165 height=110/>');
                                                        $("#comparePrice").html(selectedProp[propIndex0]['price']);
                                                        $("#CompareBeds").html(selectedProp[propIndex0]['bedrooms']);
                                                        $("#CompareBaths").html(selectedProp[propIndex0]['bathrooms']);
                                                        $("#CompareSqft").html(selectedProp[propIndex0]['area']);
                                                        $("#CompareType").html(selectedProp[propIndex0]['productType']);
                                                        $('.comproductName0').html(selectedProp[propIndex0]['productName']);
                                                        $('.comAddress0').html(selectedProp[propIndex0]['address']['line1']+',');
                                                        $('.comAddress01').html(selectedProp[propIndex0]['address']['city']+', '+selectedProp[propIndex0]['address']['country']);

                                                        $(".comslider1").html('<img src='+selectedProp[propIndex1]['picture']['linkFront']+' width=165 height=110/>');
                                                        $("#comparePrice1").html(selectedProp[propIndex1]['price']);
                                                        $("#CompareBeds1").html(selectedProp[propIndex1]['bedrooms']);
                                                        $("#CompareBaths1").html(selectedProp[propIndex1]['bathrooms']);
                                                        $("#CompareSqft1").html(selectedProp[propIndex1]['area']);
                                                        $("#CompareType1").html(selectedProp[propIndex1]['productType']);
                                                        $('.comproductName1').html(selectedProp[propIndex1]['productName']);
                                                        $('.comAddress1').html(selectedProp[propIndex1]['address']['line1']+',');
                                                        $('.comAddress11').html(selectedProp[propIndex1]['address']['city']+', '+selectedProp[propIndex1]['address']['country']);
                                                        if (selectedPropCount >= 2){
                                                            $(".comslider2").html('<img src='+selectedProp[propIndex2]['picture']['linkFront']+' width=165 height=110/>');
                                                            $("#comparePrice2").html(selectedProp[propIndex2]['price']);
                                                            $("#CompareBeds2").html(selectedProp[propIndex2]['bedrooms']);
                                                            $("#CompareBaths2").html(selectedProp[propIndex2]['bathrooms']);
                                                            $("#CompareSqft2").html(selectedProp[propIndex2]['area']);
                                                            $("#CompareType2").html(selectedProp[propIndex2]['productType']);
                                                            $('.comproductName2').html(selectedProp[propIndex2]['productName']);
                                                            $('.comAddress2').html(selectedProp[propIndex2]['address']['line1']+',');
                                                            $('.comAddress21').html(selectedProp[propIndex2]['address']['city']+', '+selectedProp[propIndex2]['address']['country']);
                                                            if (selectedPropCount >= 3){
                                                                $(".comslider3").html('<img src='+selectedProp[propIndex3]['picture']['linkFront']+' width=165 height=110/>');
                                                                $("#comparePrice3").html(selectedProp[propIndex3]['price']);
                                                                $("#CompareBeds3").html(selectedProp[propIndex3]['bedrooms']);
                                                                $("#CompareBaths3").html(selectedProp[propIndex3]['bathrooms']);
                                                                $("#CompareSqft3").html(selectedProp[propIndex3]['area']);
                                                                $("#CompareType3").html(selectedProp[propIndex3]['productType']);
                                                                $('.comproductName3').html(selectedProp[propIndex3]['productName']);
                                                                $('.comAddress3').html(selectedProp[propIndex3]['address']['line1']+',');
                                                                $('.comAddress31').html(selectedProp[propIndex3]['address']['city']+', '+selectedProp[propIndex3]['address']['country']);
                                                            };
                                                        };


                                                    });
                                                     function getPropPictures(picIndx){
                                                              var propPicture =
                                                                    ['<img src='+selectedProp[picIndx]['picture']['linkFront']+' width=165 height=110/>',
                                                                     '<img src='+selectedProp[picIndx]['picture']['linkBack']+' width=165 height=110/>',
                                                                     '<img src='+selectedProp[picIndx]['picture']['linkLeft']+' width=165 height=110/>',
                                                                     '<img src='+selectedProp[picIndx]['picture']['linkRight']+' width=165 height=110/>'];
                                                              return propPicture;
                                                    }
                                            div#name
                                                div#compare_details
                                                    p#property_name Property Name
                                                    p#compare_price Price
                                                    p#compare_beds Beds
                                                    p#compare_baths Baths
                                                    p#compare_sqft Sqft
                                                    p#compare_type Type
                                                    p#compare_built Built
                                                    p#compare_mls MLS ID
                                                    p#compare_features Features
                                            script.
                                                var checkValues = JSON.parse( '!{JSON.stringify(products)}' );

                                            ul.comMainSlider
                                                li#line0
                                                    script.
                                                        $(document).ready(function(){
                                                            $('.comslider').bxSlider({
                                                            slideWidth: 165,
                                                            minSlides: 1,
                                                            auto: true,
                                                            autoControls: false,
                                                            slideMargin: 2,
                                                            pager: false,
                                                            pause:3000,
                                                            speed: 2000
                                                            });
                                                        
                                                        var line0pictureCurrent = 0;
                                                        $('#line0 > #details > div:nth-child(2) > div:nth-child(2) > div:nth-child(1) > a:nth-child(1)').on('click', function() {
                                                          line0pictureCurrent--;
                                                          var line0picture = getPropPictures($('#line0PicIndx').val());
                                                          line0pictureCurrent = (line0pictureCurrent < 0) ? (line0picture.length - 1) : line0pictureCurrent;
                                                          $(".comslider").html(line0picture[line0pictureCurrent]);
                                                        });
                                                        $('#line0 > #details > div:nth-child(2) > div:nth-child(2) > div:nth-child(1) > a:nth-child(2)').on('click', function() {
                                                          line0pictureCurrent++;
                                                          var line0picture = getPropPictures($('#line0PicIndx').val());
                                                          line0pictureCurrent = (line0pictureCurrent > (line0picture.length -1)) ? 0 : line0pictureCurrent;
                                                          $(".comslider").html(line0picture[line0pictureCurrent]);
                                                        });

                                                        });
                                                    div#details
                                                        div#black
                                                            span#closeBox0.close_box
                                                                script.
                                                                    $('#closeBox0').html('<h3>X</h3>');
                                                                    $('#closeBox0').on('click', function(){
                                                                        //console.log("closed prop line0PicIndx:"+propIndex0);
                                                                        if(selectedProp.length > 2){
                                                                            selectedProp.splice(propIndex0,1);
                                                                            populateValues(selectedProp);
                                                                            propIndex0 = 0;
                                                                            propIndex1 = 1;
                                                                            propIndex2 = 2;
                                                                            propIndex3 = 3;
                                                                        } else {
                                                                            alert("Select atleast Two properties");
                                                                        }
                                                                    });
                                                            a.comproductName0
                                                                script.
                                                                    document.write(checkValues[0]['productName']);
                                                            br
                                                            p.comAddress0
                                                                script.
                                                                    document.write(checkValues[0]['address']['line1']+',');

                                                            p.comAddress01
                                                                script.
                                                                    document.write(checkValues[0]['address']['city']+', '+checkValues[0]['address']['country']);

                                                        div.comslider
                                                        p#comparePrice
                                                            script.
                                                                document.write(checkValues[0]['price']);
                                                        p#CompareBeds
                                                            script.
                                                                document.write(checkValues[0]['bedrooms']);
                                                        p#CompareBaths
                                                            script.
                                                                document.write(checkValues[0]['bathrooms']);
                                                        p#CompareSqft
                                                            script.
                                                                document.write(checkValues[0]['area']);
                                                        p#CompareType
                                                            script.
                                                                document.write(checkValues[0]['productType']);
                                                        p#CompareBuilt 2012
                                                        p#CompareMls 0091948
                                                        p#CompareFeatures Alarm Balcony
                                                li#line1
                                                    script.
                                                        $(document).ready(function(){
                                                            $('.comslider1').bxSlider({
                                                            slideWidth: 165,
                                                            minSlides: 1,
                                                            auto: true,
                                                            autoControls: false,
                                                            slideMargin: 2,
                                                            pager: false,
                                                            pause:3000,
                                                            speed: 2000
                                                            });
                                                          var  line1pictureCurrent = 0;
                                                        $('#line1 > #details > div:nth-child(2) > div:nth-child(2) > div:nth-child(1) > a:nth-child(1)').on('click', function() {
                                                          line1pictureCurrent--;
                                                          var line1picture = getPropPictures($('#line1PicIndx').val());
                                                          line1pictureCurrent = (line1pictureCurrent < 0) ? (line1picture.length - 1) : line1pictureCurrent;
                                                          $(".comslider1").html(line1picture[line1pictureCurrent]);
                                                        });
                                                        $('#line1 > #details > div:nth-child(2) > div:nth-child(2) > div:nth-child(1) > a:nth-child(2)').on('click', function() {
                                                          line1pictureCurrent++
                                                          var line1picture = getPropPictures($('#line1PicIndx').val());
                                                          line1pictureCurrent = (line1pictureCurrent > (line1picture.length -1)) ? 0 : line1pictureCurrent;
                                                          $(".comslider1").html(line1picture[line1pictureCurrent]);
                                                        });


                                                        });
                                                    div#details
                                                        div#black
                                                            span#close_box1.close_box
                                                                script.
                                                                    $('#close_box1').html('<h3>X</h3>');
                                                                    $('#close_box1').on('click', function(){
                                                                        //console.log("closed prop line1PicIndx :"+$('#line1PicIndx').val());
                                                                        if (selectedProp.length > 2){
                                                                            selectedProp.splice(propIndex1,1);
                                                                            populateValues(selectedProp);
                                                                            propIndex0 = 0;
                                                                            propIndex1 = 1;
                                                                            propIndex2 = 2;
                                                                            propIndex3 = 3;
                                                                        } else {
                                                                            alert("Select atleast Two properties");
                                                                        }
                                                                    });
                                                            a.comproductName1
                                                                script.
                                                                    document.write(checkValues[1]['productName']);
                                                            br
                                                            p.comAddress1
                                                                script.
                                                                    document.write(checkValues[1]['address']['line1']+',');
                                                            p.comAddress11
                                                                script.
                                                                    document.write(checkValues[1]['address']['city']+', '+checkValues[1]['address']['country']);
                                                        div.comslider1
                                                        p#comparePrice1
                                                            script.
                                                                document.write(checkValues[1]['price']);
                                                        p#CompareBeds1
                                                            script.
                                                                document.write(checkValues[1]['bedrooms']);
                                                        p#CompareBaths1
                                                            script.
                                                                document.write(checkValues[1]['bathrooms']);
                                                        p#CompareSqft1
                                                            script.
                                                                document.write(checkValues[1]['area']);
                                                        p#CompareType1
                                                            script.
                                                                document.write(checkValues[1]['productType']);
                                                        p#CompareBuilt1 2012
                                                        p#CompareMls1 0091948
                                                        p#CompareFeatures1 Alarm Balcony
                                                li#class
                                                    script.
                                                        $(document).ready(function(){
                                                            $('.comslider2').bxSlider({
                                                            slideWidth: 165,
                                                            minSlides: 1,
                                                            auto: true,
                                                            autoControls: false,
                                                            slideMargin: 2,
                                                            pager: false,
                                                            pause:3000,
                                                            speed: 2000
                                                            });
                                                            
                                                            var classPictureCurrent = 0;
                                                            $('#class > #details > div:nth-child(2) > div:nth-child(2) > div:nth-child(1) > a:nth-child(1)').on('click', function() {
                                                              classPictureCurrent--;
                                                              var classPicture = getPropPictures($('#classPicIndx').val());
                                                              classPictureCurrent = (classPictureCurrent < 0) ? (classPicture.length - 1) : classPictureCurrent;
                                                              $(".comslider2").html(classPicture[classPictureCurrent]);
                                                            });
                                                            $('#class > #details > div:nth-child(2) > div:nth-child(2) > div:nth-child(1) > a:nth-child(2)').on('click', function() {
                                                              classPictureCurrent++;
                                                              var classPicture = getPropPictures($('#classPicIndx').val());
                                                              classPictureCurrent = (classPictureCurrent > (classPicture.length -1)) ? 0 : classPictureCurrent;
                                                              $(".comslider2").html(classPicture[classPictureCurrent]);
                                                            });
                                                        });
                                                    div#details
                                                        div#black
                                                            span#close_box2.close_box
                                                                script.
                                                                    $('#close_box2').html('<h3>X</h3>');
                                                                    $('#close_box2').on('click', function(){
                                                                        //console.log("closed prop classPicIndx:"+$('#classPicIndx').val());
                                                                        if(selectedProp.length > 2){
                                                                            selectedProp.splice(propIndex2,1);
                                                                             populateValues(selectedProp);
                                                                            propIndex0 = 0;
                                                                            propIndex1 = 1;
                                                                            propIndex2 = 2;
                                                                            propIndex3 = 3;
                                                                        } else {
                                                                            alert("Select atleast Two properties");
                                                                        }
                                                                    });
                                                            a.comproductName2
                                                                script.
                                                                    document.write(checkValues[2]['productName']);
                                                            br
                                                            p.comAddress2
                                                                script.
                                                                    document.write(checkValues[2]['address']['line1']+',');

                                                            p.comAddress21
                                                                script.
                                                                    document.write(checkValues[2]['address']['city']+', '+checkValues[2]['address']['country']);
                                                        div.comslider2
                                                        p#comparePrice2
                                                            script.
                                                                document.write(checkValues[2]['price']);
                                                        p#CompareBeds2
                                                            script.
                                                                document.write(checkValues[2]['bedrooms']);
                                                        p#CompareBaths2
                                                            script.
                                                                document.write(checkValues[2]['bathrooms']);
                                                        p#CompareSqft2
                                                            script.
                                                                document.write(checkValues[2]['area']);
                                                        p#CompareType2
                                                            script.
                                                                document.write(checkValues[2]['productType']);
                                                        p#CompareBuilt2 2012
                                                        p#CompareMls2 0091948
                                                        p#CompareFeatures2 Alarm Balcony
                                                li#class1
                                                    script.
                                                        $(document).ready(function(){
                                                            $('.comslider3').bxSlider({
                                                            slideWidth: 165,
                                                            minSlides: 1,
                                                            auto: true,
                                                            autoControls: false,
                                                            slideMargin: 2,
                                                            pager: false,
                                                            pause:3000,
                                                            speed: 2000
                                                            });
                                                            
                                                            var class1PictureCurrent = 0;
                                                            $('#class1 > #details > div:nth-child(2) > div:nth-child(2) > div:nth-child(1) > a:nth-child(1)').on('click', function() {
                                                              class1PictureCurrent--;
                                                              var classPicture = getPropPictures($('#class1PicIndx').val());
                                                              class1PictureCurrent = (class1PictureCurrent < 0) ? (classPicture.length - 1) : class1PictureCurrent;
                                                              $(".comslider3").html(classPicture[class1PictureCurrent]);
                                                            });
                                                            $('#class1 > #details > div:nth-child(2) > div:nth-child(2) > div:nth-child(1) > a:nth-child(2)').on('click', function() {
                                                              class1PictureCurrent++;
                                                              var classPicture = getPropPictures($('#class1PicIndx').val());
                                                              class1PictureCurrent = (class1PictureCurrent > (classPicture.length -1)) ? 0 : class1PictureCurrent;
                                                              $(".comslider3").html(classPicture[class1PictureCurrent]);
                                                            });
                                                        });
                                                    div#details
                                                        div#black
                                                            span#close_box3.close_box
                                                                script.
                                                                    $('#close_box3').html('<h3>X</h3>');
                                                                    $('#close_box3').on('click', function(){
                                                                        //console.log("closed prop class1PicIndx :"+$('#class1PicIndx').val());
                                                                        if(selectedProp.length > 2){
                                                                            selectedProp.splice(propIndex3,1);
                                                                            populateValues(selectedProp);
                                                                            propIndex0 = 0;
                                                                            propIndex1 = 1;
                                                                            propIndex2 = 2;
                                                                            propIndex3 = 3;
                                                                        } else {
                                                                            alert("Select atleast Two properties");
                                                                        }
                                                                    });
                                                            a.comproductName3
                                                                script.
                                                                    document.write(checkValues[3]['productName']);
                                                            br
                                                            p.comAddress3
                                                                script.
                                                                    document.write(checkValues[3]['address']['line1']+',');

                                                            p.comAddress31
                                                                script.
                                                                    document.write(checkValues[3]['address']['city']+', '+checkValues[3]['address']['country']);
                                                        div.comslider3
                                                        p#comparePrice3
                                                            script.
                                                                document.write(checkValues[3]['price']);
                                                        p#CompareBeds3
                                                            script.
                                                                document.write(checkValues[3]['bedrooms']);
                                                        p#CompareBaths3
                                                            script.
                                                                document.write(checkValues[3]['bathrooms']);
                                                        p#CompareSqft3
                                                            script.
                                                                document.write(checkValues[3]['area']);
                                                        p#CompareType3
                                                            script.
                                                                document.write(checkValues[3]['productType']);
                                                        p#CompareBuilt3 2012
                                                        p#CompareMls3 0091948
                                                        p#CompareFeatures3 Alarm Balcony
                                            div#nextNav
                                                br
                                                br
                                                br
                                                br
                                                br
                                                br
                                                br
                                                br
                                                br
                                                br
                                                br
                                                br
                                                br
                                                br
                                                br
                                                script.
                                                    document.write('<div class=\"bx-wrapper\"><div class=\"bx-controls bx-has-controls-direction\"><div class=\"bx-controls-direction\"> <a class=\"bx-next\"></a></div></div></div>');
                                                    firstTimeClicked = '';
                                                    var selectedProp;

                                                    $('#nextNav').on('click', function() {
                                                        //console.log('firstTimeClicked: '+firstTimeClicked);
                                                        //console.log('firstTimeClickedPrev :'+firstTimeClickedPrev);
                                                        //if(propertyIndexCurrent === 0 && firstTimeClicked === ''){
                                                        //    propertyIndexCurrent = 3;
                                                        //}
                                                        //if(propertyIndexCurrent === 0 && !firstTimeClicked && !firstTimeClickedPrev){
                                                        //    propertyIndexCurrent = 4;
                                                        //}
                                                        //if (firstTimeClicked === 'true' && firstTimeClickedPrev === 'true') {
                                                        //    propertyIndexCurrent++;
                                                        // }
                                                        //if (firstTimeClicked === 'true' && !firstTimeClickedPrev) {
                                                        //    propertyIndexCurrent++;
                                                        //}
                                                        //firstTimeClicked = 'true';
                                                        //propertyIndexCurrent++;

                                                        //if(selectedProp == undefined){
                                                        //    selectedProp = $('input[name=property]:checked').map(function() {
                                                        //                        console.log($(this).val());
                                                        //                        return propertyList[$(this).val()];
                                                        //                    }).get();
                                                        //    console.log('selectedProp.length NEXT :'+selectedProp.length);
                                                        //}
                                                        //console.log('selectedCheckValues PREV :'+selectedCheckValues.length);
                                                        //console.log('Selected prop: '+($('#selectedPropCount').val() - 1));
                                                        selectedPropCount = ($('#selectedPropCount').val() - 1);
                                                        
                                                        
                                                        
                                                        //propertyIndexCurrent = (propertyIndexCurrent > selectedPropCount)? 0 : propertyIndexCurrent;

                                                        //console.log('propertyIndexCurrent : '+propertyIndexCurrent);
                                                        
                                                        if(selectedPropCount === 1 ){
                                                            var propIndex0Temp  = propIndex0;
                                                        propIndex0 = propIndex1;
                                                                propIndex1 = propIndex0Temp;
                                                        } else if(selectedPropCount === 2){
                                                            var propIndex0Temp  = propIndex0;
                                                                propIndex0 = propIndex1;
                                                        propIndex1 = propIndex2;
                                                                propIndex2 = propIndex0Temp;
                                                        } else if(selectedPropCount === 3){
                                                            var propIndex0Temp  = propIndex0;
                                                                propIndex0 = propIndex1;
                                                                propIndex1 = propIndex2;
                                                        propIndex2 = propIndex3;
                                                                propIndex3 = propIndex0Temp;
                                                        } else {
                                                            propIndex0 = propIndex1;
                                                            propIndex1 = propIndex2;
                                                            propIndex2 = propIndex3;
                                                        propIndex3++;
                                                        if(propIndex3 > selectedPropCount){
                                                            propIndex3 = 0;
                                                        };
                                                        }

                                                        $('#line0PicIndx').val(propIndex0);
                                                        $('#line1PicIndx').val(propIndex1);
                                                        $('#classPicIndx').val(propIndex2);
                                                        $('#class1PicIndx').val(propIndex3);

                                                        $(".comslider").html('<img src='+selectedProp[propIndex0]['picture']['linkFront']+' width=165 height=110/>');
                                                        $("#comparePrice").html(selectedProp[propIndex0]['price']);
                                                        $("#CompareBeds").html(selectedProp[propIndex0]['bedrooms']);
                                                        $("#CompareBaths").html(selectedProp[propIndex0]['bathrooms']);
                                                        $("#CompareSqft").html(selectedProp[propIndex0]['area']);
                                                        $("#CompareType").html(selectedProp[propIndex0]['productType']);
                                                        $('.comproductName0').html(selectedProp[propIndex0]['productName']);
                                                        $('.comAddress0').html(selectedProp[propIndex0]['address']['line1']+',');
                                                        $('.comAddress01').html(selectedProp[propIndex0]['address']['city']+', '+selectedProp[propIndex0]['address']['country']);

                                                        $(".comslider1").html('<img src='+selectedProp[propIndex1]['picture']['linkFront']+' width=165 height=110/>');
                                                        $("#comparePrice1").html(selectedProp[propIndex1]['price']);
                                                        $("#CompareBeds1").html(selectedProp[propIndex1]['bedrooms']);
                                                        $("#CompareBaths1").html(selectedProp[propIndex1]['bathrooms']);
                                                        $("#CompareSqft1").html(selectedProp[propIndex1]['area']);
                                                        $("#CompareType1").html(selectedProp[propIndex1]['productType']);
                                                        $('.comproductName1').html(selectedProp[propIndex1]['productName']);
                                                        $('.comAddress1').html(selectedProp[propIndex1]['address']['line1']+',');
                                                        $('.comAddress11').html(selectedProp[propIndex1]['address']['city']+', '+selectedProp[propIndex1]['address']['country']);
                                                        if (selectedPropCount >= 2){
                                                            $(".comslider2").html('<img src='+selectedProp[propIndex2]['picture']['linkFront']+' width=165 height=110/>');
                                                            $("#comparePrice2").html(selectedProp[propIndex2]['price']);
                                                            $("#CompareBeds2").html(selectedProp[propIndex2]['bedrooms']);
                                                            $("#CompareBaths2").html(selectedProp[propIndex2]['bathrooms']);
                                                            $("#CompareSqft2").html(selectedProp[propIndex2]['area']);
                                                            $("#CompareType2").html(selectedProp[propIndex2]['productType']);
                                                            $('.comproductName2').html(selectedProp[propIndex2]['productName']);
                                                            $('.comAddress2').html(selectedProp[propIndex2]['address']['line1']+',');
                                                            $('.comAddress21').html(selectedProp[propIndex2]['address']['city']+', '+selectedProp[propIndex2]['address']['country']);
                                                            if (selectedPropCount >= 3){
                                                                $(".comslider3").html('<img src='+selectedProp[propIndex3]['picture']['linkFront']+' width=165 height=110/>');
                                                                $("#comparePrice3").html(selectedProp[propIndex3]['price']);
                                                                $("#CompareBeds3").html(selectedProp[propIndex3]['bedrooms']);
                                                                $("#CompareBaths3").html(selectedProp[propIndex3]['bathrooms']);
                                                                $("#CompareSqft3").html(selectedProp[propIndex3]['area']);
                                                                $("#CompareType3").html(selectedProp[propIndex3]['productType']);
                                                                $('.comproductName3').html(selectedProp[propIndex3]['productName']);
                                                                $('.comAddress3').html(selectedProp[propIndex3]['address']['line1']+',');
                                                                $('.comAddress31').html(selectedProp[propIndex3]['address']['city']+', '+selectedProp[propIndex3]['address']['country']);
                                                            };
                                                        };

                                                    });
                                else if routePath === "Add"
                                    div#form-add-div
                                        script.
                                            $(document).ready(function(){
                                               loadCountries('#country-add', '');
                                            });
                                        form#form-add(method="POST",action="/properties",enctype='multipart/form-data')
                                        p#Addelements Name for Property :
                                            input(type="text", name="productName")
                                        p#Addelements Type for the Product :
                                            input(type="text", name="productType")
                                        p#Addelements Type for the Property (Sale/Rental etc) :
                                            input(type="text", name="type")
                                        p#Addelements Property Price :
                                            input(type="number", name="price")
                                        p#Addelements Property's Number of Bedrooms :
                                            input(type="number", name="bedrooms")
                                        p#Addelements Property's Number of Bathrooms :
                                            input(type="number", name="bathrooms")
                                        p#Addelements Property's Area :
                                            input(type="number", name="area")
                                        p#Addelements Property's Amenities :
                                            input(type="text", name="amenities")
                                        p#Addelements Property's Comments :
                                            input(type="text", name="comments_from_user")
                                        p#Addelements Property's Address line1 :
                                            input(type="text", name="line1")
                                        p#Addelements Property's Address line2:
                                            input(type="text", name="line2")
                                        p#Addelements Property's City:
                                            input(type="text", name="city")
                                        p#Addelements Property's State:
                                            input(type="text", name="state")
                                            p#country-label Property's Country:
                                                //input(type="text", name="country")
                                                select#country-add(name="country")
                                                    option(value='')
                                        p#Addelements Property's Zip:
                                            input(type="text", name="zip")
                                        p#Addelements Property's Latitude :
                                            input(type="float", name="latitude")
                                        p#Addelements Property's Longitude :
                                            input(type="float", name="longitude")
                                        p#Addelements Property's Front Image :
                                            input(type="file", name="pictureFront")
                                        p#Addelements Property's Back Image :
                                            input(type="file", name="pictureBack")
                                        p#Addelements Property's Left Image :
                                            input(type="file", name="pictureLeft")
                                        p#Addelements Property's Right Image :
                                            input(type="file", name="pictureRight")
                                        button#serachFunctionButton(type="submit", name="AddProduct") Add Product
                                else if routePath === "Edit"
                                    div#form-edit-div
                                        script.
                                            $(document).ready(function(){
                                               loadCountries('#country-edit', "#{product.address.country}");
                                            });
                                        h3 Update Products
                                        form#form-edit(method="POST",action="/properties/#{product.productName}",enctype='multipart/form-data')
                                            input(type="hidden", name="_method", value="PUT")
                                            p#Addelements Name for Property :
                                                input(type="text", name="name", value="#{product.productName}")
                                            p#Addelements Type for the Product :
                                                input(type="text", name="productType", value="#{product.productType}")    
                                            p#Addelements Type for the Property (Sale/Rental etc) :
                                                input(type="text", name="type", value="#{product.type}")
                                            p#Addelements Property Price :
                                                input(type="number", name="price", value="#{product.price}")
                                            p#Addelements Property's Number of Bedrooms :
                                                input(type="number", name="bedrooms", value="#{product.bedrooms}")
                                            p#Addelements Property's Number of Bathrooms :
                                                input(type="number", name="bathrooms", value="#{product.bathrooms}")
                                            p#Addelements Property's Area :
                                                input(type="number", name="area", value="#{product.area}")
                                            p#Addelements Property's Amenities :
                                                input(type="text", name="amenities", value="#{product.amenities}")
                                            p#Addelements Property's Comments :
                                                input(type="text", name="comments_from_user", value="#{product.comments_from_user}")
                                            p#Addelements Property's Address line1 :
                                                input(type="text", name="line1", value="#{product.address.line1}")
                                            p#Addelements Property's Address line2:
                                                input(type="text", name="line2", value="#{product.address.line2}")
                                            p#Addelements Property's City:
                                                input(type="text", name="city", value="#{product.address.city}")
                                            p#Addelements Property's State:
                                                input(type="text", name="state", value="#{product.address.state}")
                                            p#edit-country-label Property's Country:
                                                //input(type="text", name="country", value="#{product.address.country}")
                                                select#country-edit(name="country")
                                                    option(value='')
                                            p#Addelements Property's Zip:
                                                input(type="text", name="zip", value="#{product.address.zip}")
                                            p#Addelements Property's Latitude :
                                                input(type="float", name="latitude", value="#{product.LatLng.latitude}")
                                            p#Addelements Property's Longitude :
                                                input(type="float", name="longitude", value="#{product.LatLng.longitude}")
                                            p#Addelements Property's Front Image :
                                                input(type="file", name="pictureFront")
                                            p#Addelements Property's Back Image :
                                                input(type="file", name="pictureBack")
                                            p#Addelements Property's Left Image :
                                                input(type="file", name="pictureLeft")
                                            p#Addelements Property's Right Image :
                                                input(type="file", name="pictureRight")
                                            button#serachFunctionButton(type="submit") Update
                                else if routePath === "Show"
                                    div#show-div
                                        p Name for Property :
                                            a #{product.productName}
                                        p Type for the Property (Sale/Rental etc) :
                                            a #{product.type}
                                        p Property Price : 
                                            a #{product.price}
                                        p Property's Number of Bedrooms : 
                                            a #{product.bedrooms}
                                        p Property's Number of Bathrooms : 
                                            a #{product.bathrooms}
                                        p Property's Area : 
                                            a #{product.area}
                                        p Property's Amenities : 
                                            a #{product.amenities}
                                        p Property's Comments : 
                                            a #{product.comments_from_user}
                                        p Property's Address line1 : 
                                            a #{product.address.line1}
                                        p Property's Address line2 : 
                                            a #{product.address.line2}
                                        p Property's City: 
                                            a #{product.address.city}
                                        p Property's State: 
                                            a #{product.address.state}
                                        p Property's Country: 
                                            a #{product.address.country}
                                        p Property's Zip: 
                                            a #{product.address.zip}
                                        p Property's Latitude : 
                                            a #{product.LatLng.latitude}
                                        p Property's Longitude : 
                                            a #{product.LatLng.longitude}
                                        img(src="#{product.picture}", width="32", height="32")
                                        a(href="/properties/#{product.productName}/edit", style="text-decoration: none")
                                            h3 Edit
                                            form(action="/properties/#{product.productName}", method="POST")
                                                input(type="hidden", name="_method", value="DELETE")
                                                button#serachFunctionButton(type="submit", name="Delete") Delete
                                else if routePath === "compare"
                                    div#MapDiv
                                        div#compare_body
                                            div#compare_header
                                                div#back
                                                    p Back
                                                h4 Comparing '3' properties
                                                div#close
                                                    p Close
                                            div#comparison
                                                script.
                                                    var checkValues = JSON.parse( '!{JSON.stringify(products)}' );
                                                ul
                                                    li
                                                        div#compare_details
                                                            p#property_name Property Name
                                                            p#compare_price Price
                                                            p#compare_beds Beds
                                                            p#compare_baths Baths
                                                            p#compare_sqft Sqft
                                                            p#compare_type Type
                                                            p#compare_built Built
                                                            p#compare_mls MLS ID
                                                            p#compare_features Features
                                                    li
                                                        script.
                                                            $(document).ready(function(){
                                                                $('.slider').bxSlider({
                                                                slideWidth: 165,
                                                                minSlides: 1,
                                                                auto: true,
                                                                autoControls: false,
                                                                slideMargin: 2,
                                                                pager: false,
                                                                pause:3000,
                                                                speed: 2000                                                                
                                                                });
                                                               
                                                            });
                                                        div#details
                                                            div#black
                                                            div.slider
                                                                img(src="/images/Prop4a.jpg", width="247px",height="110px")
                                                                img(src="images/Prop4b.jpg", width="247px",height="110px")
                                                                img(src="images/Prop4c.jpg", width="247px",height="110px")
                                                                img(src="images/Prop4d.jpg", width="247px",height="110px")
                                                            p#comparePrice
                                                                script.
                                                                    document.write(checkValues[0]['price']);
                                                            p#CompareBeds
                                                                script.
                                                                    document.write(checkValues[0]['bedrooms']);
                                                            p#CompareBaths
                                                                script.
                                                                    document.write(checkValues[0]['bathrooms']);
                                                            p#CompareSqft
                                                                script.
                                                                    document.write(checkValues[0]['area']);
                                                            p#CompareType
                                                                script.
                                                                    document.write(checkValues[0]['productType']);
                                                            p#CompareBuilt 2012
                                                            p#CompareMls 0091948
                                                            p#CompareFeatures Alarm Balcony
                                                    li
                                                        div#details
                                                            div#black
                                                            div.slider
                                                                img(src="/images/Prop4d.jpg", width="247px",height="110px")
                                                                img(src="images/Prop4a.jpg", width="247px",height="110px")
                                                                img(src="images/Prop4b.jpg", width="247px",height="110px")
                                                                img(src="images/Prop4c.jpg", width="247px",height="110px")
                                                            p#comparePrice
                                                                script.
                                                                    document.write(checkValues[1]['price']);
                                                            p#CompareBeds
                                                                script.
                                                                    document.write(checkValues[1]['bedrooms']);
                                                            p#CompareBaths
                                                                script.
                                                                    document.write(checkValues[1]['bathrooms']);
                                                            p#CompareSqft
                                                                script.
                                                                    document.write(checkValues[1]['area']);
                                                            p#CompareType
                                                                script.
                                                                    document.write(checkValues[1]['productType']);
                                                            p#CompareBuilt 2012
                                                            p#CompareMls 0091948
                                                            p#CompareFeatures Alarm Balcony
                                                    li
                                                        div#details
                                                            div#black
                                                            div.slider
                                                                img(src="/images/Prop4c.jpg", width="247px",height="110px")
                                                                img(src="images/Prop4d.jpg", width="247px",height="110px")
                                                                img(src="images/Prop4a.jpg", width="247px",height="110px")
                                                                img(src="images/Prop4b.jpg", width="247px",height="110px")
                                                            p#comparePrice
                                                                script.
                                                                    document.write(checkValues[2]['price']);
                                                            p#CompareBeds
                                                                script.
                                                                    document.write(checkValues[2]['bedrooms']);
                                                            p#CompareBaths
                                                                script.
                                                                    document.write(checkValues[2]['bathrooms']);
                                                            p#CompareSqft
                                                                script.
                                                                    document.write(checkValues[2]['area']);
                                                            p#CompareType
                                                                script.
                                                                    document.write(checkValues[2]['productType']);
                                                            p#CompareBuilt 2012
                                                            p#CompareMls 0091948
                                                            p#CompareFeatures Alarm Balcony
                                else if routePath === "searchFailed"
                                    div#MapDiv.propertiesListContainer
                                        script.
                                            var propertyList = "#{products}";
                                            console.log(propertyList)
                                        //script(type='text/javascript', src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false")
                                        script(type='text/javascript', src='/javascripts/searchFailed.js')
            div#mapidHide(style="display:none")
                div#moreMap
                    p Close Pane X
                div#propertyZoomedDetails
                    br
                    script.
                        document.write("<div class=\"slidermap\"> <div class=\"bxslidermap\">"
                                        +"<img src="+propertyList[0].picture.linkFront+" width=700 height=270/>"
                                        +"<img src="+propertyList[0].picture.linkBack+" width=700 height=270/>"
                                        +"<img src="+propertyList[0].picture.linkLeft+" width=700 height=270/>"
                                        +"<img src="+propertyList[0].picture.linkRight+" width=700 height=270/>"
                                        +"</div></div>");
                    div#description
                        div#tabs
                            ul
                                li
                                    img(src="/images/maps_button.png")
                                li
                                    img(src="/images/messgae.png")
                                li
                                    img(src="/images/save_button.png")
                                li
                                    img(src="/images/some_button.png")
                                li
                                    img(src="/images/print.png")
                        div#price
                            p Price:
                                script.
                                    document.write(" $"+propertyList[0].price)
                        div#property
                            div#property_details
                                h4 Property Details
                            div#property_types
                                ul
                                    li#beds Beds:
                                        script.
                                            document.write(" "+propertyList[0].bedrooms)
                                    li#area Area:
                                        script.
                                            document.write(" "+propertyList[0].area)
                                    li Built: 2005
                                    li#baths Bath:
                                        script.
                                            document.write(" "+propertyList[0].bathrooms)
                                    li#type Type:
                                        script.
                                            document.write(" "+propertyList[0].productType)
                                    li MLS ID
                        div#description_prop
                            h4 Descriptions
                            p Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit.
        div(style="display:none; width: 50%; height:auto")
            div#box1
                div#container
                    div#id_login
                        div#normal_login
                            div#hr_login
                                p  LSR login
                            div#form-div
                                script.
                                    function validateForm()
                                        {
                                        var emailVal = document.forms["form"]["email"].value;
                                        var pwdVal = document.forms["form"]["password"].value;
                                        var atpos=emailVal.indexOf("@");
                                        var dotpos=emailVal.lastIndexOf(".");
                                        if (atpos<1 || dotpos<atpos+2 || dotpos+2>=emailVal.length || emailVal.length == 0)
                                          {
                                          alert("Not a valid e-mail address");
                                          return false;
                                          }
                                          if (pwdVal.length == 0)
                                          {
                                          alert("Please Enter a valid password");
                                          return false;
                                          }
                                            }
                                    $(document).ready(function(){
                                            $('#email').val('#{email}');
                                            $('#password').val('#{pwd}');
                                            if('#{remember}'){
                                                $("#remember").attr('checked','checked');
                                            }
                                    });
                                        
                                form#form(method='post', action='/login', onsubmit='return validateForm();')
                                    input#email(type="email", name="email", value="")
                                    input#password(type="password", name="password", value="")
                                    input#remember(type="checkbox", name="remember")
                                    p#remember-lable Remember me
                                    p#forgot Forgot password?
                                        a(href="/reset")  Reset it
                                    div#button
                                        input#submit(type="submit", value="Login", id="login")
                        div#border
                            a OR
                        div#social_network
                            | Connect with
                            div#social_link
                                a#login(href="/fbauth", class="iframe")
                                    div#facebook_text Facebook
                                a#twitter(href="/auth/twitter")
                                    div#twitter_text Twitter
                                a#linkedin(href="/auth/linkedin")
                                    div#linkedin_text LinkedIn
                        div#signup
                            p Don't have an account?
                                a(href="/signup")  Create one here

                            script.
                                $("#propertyPrice").live('click',function() {
                                var i = $(this).attr('class');
                                setPropSlider(i);
                                return false;
                                });
                                function setPropSlider(i){
                                $("#LocationClick").removeClass().addClass(i);
                                $("#SendMailClick").removeClass().addClass(i);
                                $("#SaveClick").removeClass().addClass(i);
                                $("#FacebookShareClick").removeClass().addClass(i);
                                $("#TwitterShareClick").removeClass().addClass(i);
                                $("#LinkedinShareClick").removeClass().addClass(i);
                                $("#PrintClick").removeClass().addClass(i);
                                $("#price p").html("Price: $"+propertyList[i].price);
                                $("#beds").html("Beds: "+propertyList[i].bedrooms);
                                $("#baths").html("Baths: "+propertyList[i].bathrooms);
                                $("#area").html("Area: "+propertyList[i].area);
                                $("#type").html("Type: "+propertyList[i].productType);
                                $('#propIdSldrHdr').val(i);
                                $('.comproductNameSldrHdr').html(propertyList[i].productName);
                                $('.comAddressSldrHdr').html(propertyList[i].address.line1+', '+propertyList[i].address.line2+', '+propertyList[i].address.city+', '+propertyList[i].address.state+', '+propertyList[i].address.country +' - '+propertyList[i].address.zip);
                                    $('.slider').empty();
                                    $('.slider').append(
                                         "<div class=\"bxslider\"> <img src="+propertyList[i].picture.linkFront+" width=102.5% height=270/>"
                                         +"<img src="+propertyList[i].picture.linkBack+" width=102.5% height=270/>"
                                         +"<img src="+propertyList[i].picture.linkLeft+" width=102.5% height=270/>"
                                         +"<img src="+propertyList[i].picture.linkRight+" width=102.5% height=270/> </div>"
                                         );
                                $('.bxslider').bxSlider({
                                        mode: 'horizontal',
                                         auto: true,
                                         pause: 2000,
                                         speed:1000,
                                        infiniteLoop:true,
                                        buildPager: function(slideIndex){
                                        switch(slideIndex){
                                            case 0:
                                                return '<img src='+propertyList[i].picture.linkFront+' width=100 height=50>';
                                            case 1:
                                                return '<img src='+propertyList[i].picture.linkBack+' width=100 height=50>';
                                            case 2:
                                                return '<img src='+propertyList[i].picture.linkLeft+' width=100 height=50>';
                                            case 3:
                                                return '<img src='+propertyList[i].picture.linkRight+' width=100 height=50>';
                                        }
                                        },
                                        onSlideAfter: function($slideElement, oldIndex, newIndex){
                                        switch(newIndex){
                                            case 0:
                                                selectedImage = propertyList[i].picture.linkFront;
                                                break;
                                            case 1:
                                                selectedImage = propertyList[i].picture.linkBack;
                                                break;
                                            case 2:
                                                selectedImage = propertyList[i].picture.linkLeft;
                                                break;
                                            case 3:
                                                selectedImage = propertyList[i].picture.linkRight;
                                                break;
                                        }
                                        }
                                    });

                                }
                                $(document).ready(function(){
                                    $('.bxslider').bxSlider({
                                        mode: 'horizontal',
                                         auto: true,
                                         pause: 2000,
                                         speed:1000,
                                        infiniteLoop:true,
                                        buildPager: function(slideIndex){
                                        switch(slideIndex){
                                            case 0:
                                                return '<img src='+propertyList[0].picture.linkFront+' width=100 height=50>';
                                            case 1:
                                                return '<img src='+propertyList[0].picture.linkBack+' width=100 height=50>';
                                            case 2:
                                                return '<img src='+propertyList[0].picture.linkLeft+' width=100 height=50>';
                                            case 3:
                                                return '<img src='+propertyList[0].picture.linkRight+' width=100 height=50>';
                                        }
                                        },
                                        onSlideAfter: function($slideElement, oldIndex, newIndex){
                                        switch(newIndex){
                                            case 0:
                                                selectedImage = propertyList[0].picture.linkFront;
                                                break;
                                            case 1:
                                                selectedImage = propertyList[0].picture.linkBack;
                                                break;
                                            case 2:
                                                selectedImage = propertyList[0].picture.linkLeft;
                                                break;
                                            case 3:
                                                selectedImage = propertyList[0].picture.linkRight;
                                                break;
                                        }
                                        }
                                    });
                                });
                            script.
                                function loadCountries(countrySelecter, defaultVal){
                                    var url = '';
                                    url = (window.location.pathname.length > 1)? window.location.href.replace(window.location.pathname, '/') + 'loadcountry' : window.location.href + 'loadcountry' ;
                                    $.ajax({
                                            type: "get",
                                            contentType: "application/json; charset=utf-8",
                                            data: {},
                                            url: url.replace('#', '').replace('_=_', ''),
                                            dataType: "json",
                                            success: successResponse,
                                            error: errorResponse
                                    });// end ajax

                                    // success function
                                    function successResponse(response){
                                    $.each(response, function (key, value) {
                                        //var appendData = "<option value='" + value.ccode + "'>" + value.country + "</option>";
                                        var appendData = "<option value='" + value.country + "'>" + value.country + "</option>";
                                        $(countrySelecter).html($(countrySelecter).html() + appendData);
                                    });
                                        if (countrySelecter === '#country-edit'){
                                            $(countrySelecter).val(defaultVal);
                                        }
                                    }
                                    // ajax error function
                                    function errorResponse(xhr, ajaxOptions, thrownError) {
                                        alert('Error on Loading Countries.' + thrownError);                
                                    }
                                };
                                var url = $(location).attr('href');
                                url = url.substring(0, url.lastIndexOf('/'));
                                $("#LocationClick").live('click',function() {
                                    var propid = $(this).attr('class');
                                    var mylist=document.getElementById("mySelect");
                                    var sort = mylist.options[mylist.selectedIndex].value;
                                    var a = $('<a>').attr('href', url+'/locationmap/'+propid+'/'+sort).appendTo('body');
                                    a[0].click();
                                    a.remove();
                                });
                                $("#SendMailClick").live('click',function() {
                                    var index = $(this).attr('class')
                                        , price = propertyList[index].price
                                        , beds = propertyList[index].bedrooms
                                        , area = propertyList[index].area
                                        , built = 2005 //TODO: propertyList[index].price
                                        , bath = propertyList[index].bathrooms
                                        , type = propertyList[index].productType;
                                    alert('Mail sent.');
                                    $.ajax({
                                        url:url+'/sendmail'+selectedImage+'/'+price+'/'+beds+'/'+area+'/'+built+'/'+bath+'/'+type,
                                        type:'GET',
                                        success:function(result){
                                                    console.log('Mail sent.');
                                                },
                                        error:function(error){
                                                    console.log('Error while sending mail:'+ error);
                                                }
                                    });
                                    
                                });

                                $("#SaveClick").live('click',function() {
                                                                        var propDtlHtml =  document.getElementById('mainAside').innerHTML.substring(document.getElementById('mainAside').innerHTML.indexOf('<div id="price">'));
                                    var html = '<html><head><meta name="viewport" content="width=device-width"><title>'
                                                +selectedImage+' (1200800)</title></head><body style="margin: 0px;">'
                                                +'<img style="-webkit-user-select: none; cursor: -webkit-zoom-in;" src="'
                                                +url+selectedImage+'" width="705" height="469">'
                                                +propDtlHtml+'</body></html>';
                                    var textFileAsBlob = new Blob([html], {type:'text/html'});
                                    var fileNameToSaveAs = 'propertdetails.html';

                                    var downloadLink = document.createElement("a");
                                    downloadLink.download = fileNameToSaveAs;
                                    downloadLink.innerHTML = "Download File";
                                    downloadLink.href = window.webkitURL.createObjectURL(textFileAsBlob);

                                    if (window.webkitURL != null)
                                    {
                                        // Chrome allows the link to be clicked
                                        // without actually adding it to the DOM.
                                        downloadLink.href = window.webkitURL.createObjectURL(textFileAsBlob);
                                    }
                                    else
                                    {
                                        // Firefox requires the link to be added to the DOM
                                        // before it can be clicked.
                                        downloadLink.href = window.URL.createObjectURL(textFileAsBlob);
                                        downloadLink.onclick = destroyClickedElement;
                                        downloadLink.style.display = "none";
                                        document.body.appendChild(downloadLink);
                                    }

                                    downloadLink.click();

                                });
                                $("#FacebookShareClick").live('click',function() {
                                    var index = $(this).attr('class')
                                        , price = propertyList[index].price
                                        , beds = propertyList[index].bedrooms
                                        , area = propertyList[index].area
                                        , built = 2005 //TODO: propertyList[index].price
                                        , bath = propertyList[index].bathrooms
                                        , type = propertyList[index].productType;
                                   selectedImage = selectedImage.substring(selectedImage.lastIndexOf('/'));
                                   var a = $('<a>').attr('href', url+'/sharefacebook'+selectedImage+'/'+price+'/'+beds+'/'+area+'/'+built+'/'+bath+'/'+type).attr('target', '_blank').appendTo('body');
                                   a[0].click();
                                   a.remove();
                                });
                                $('#TwitterShareClick').click(function(){
                                    var index = $(this).attr('class')
                                        , price = propertyList[index].price
                                        , beds = propertyList[index].bedrooms
                                        , area = propertyList[index].area
                                        , built = 2005 //TODO: propertyList[index].price
                                        , bath = propertyList[index].bathrooms
                                        , type = propertyList[index].productType;
                                   selectedImage = selectedImage.substring(selectedImage.lastIndexOf('/'));
                                   url = url.replace('localhost','www.mysite.com');
                                   var a = $('<a>').attr('href', url+'/sharetwitter'+selectedImage+'/'+price+'/'+beds+'/'+area+'/'+built+'/'+bath+'/'+type).attr('target', '_blank').appendTo('body');
                                   a[0].click();
                                   a.remove();
                                 });

                                 $('#LinkedinShareClick').click(function(){
                                    var index = $(this).attr('class')
                                       , price = propertyList[index].price
                                       , beds = propertyList[index].bedrooms
                                       , area = propertyList[index].area
                                       , built = 2005 //TODO: propertyList[index].price
                                       , bath = propertyList[index].bathrooms
                                       , type = propertyList[index].productType;
                                    selectedImage = selectedImage.substring(selectedImage.lastIndexOf('/'));
                                    var a = $("<a>").attr("href", url+'/sharelinkedin'+selectedImage+'/'+price+'/'+beds+'/'+area+'/'+built+'/'+bath+'/'+type).attr('target', '_blank').appendTo("body");
                                    a[0].click();
                                    a.remove();

                                   //selectedImage = selectedImage.substring(selectedImage.lastIndexOf('/'));
                                   //url = url.replace('localhost','www.mysite.com');
                                   //var a = $('<a>').attr('href', url+'/sharetwitter'+selectedImage).attr('target', '_blank').appendTo('body');
                                   //a[0].click();
                                   //a.remove();
                                });
                                $("#PrintClick").live('click',function() {
                                    var propDtlHtml =  document.getElementById('mainAside').innerHTML.substring(document.getElementById('mainAside').innerHTML.indexOf('<div id="price">'));
                                    var html = '<html><head><meta name="viewport" content="width=device-width"><title>'
                                                +selectedImage+' (1200800)</title></head><body style="margin: 0px;">'
                                                +'<img style="-webkit-user-select: none; cursor: -webkit-zoom-in;" src="'
                                                +url+selectedImage+'" width="705" height="469">'
                                                //         +'<div id=MapDiv><ul id="searchList"><li><div><div>'
                                                +propDtlHtml+'</body></html>';
                                                //var printMe = window.open(url+selectedImage, 'Print'); 
                                    var printMe = window.open('', 'Print'); 
                                    printMe.document.write(html);
                                    printMe.print();                                    
                                });

                            script.
                                $(document).ready(function(){
                                    //Examples of how to assign the Colorbox event to elements
                                    $(".group1").colorbox({rel:'group1', inline:true, transition:"none"});
                                });
                            //footer#mainFooter
                                p#FooterText Copyright &copy; LSR 2013
                //-ul
                                li
                                    //-img#LINKEDIN(src="/images/linkedin-variation.png", width="32", height="32")
                                li
                                    //-img#TWITTER(src="/images/twitter-variation.png", width="32", height="32")
                                li
                                    //-img#GOOGLEPLUS(src="/images/gplus-variation.png", width="32", height="32")
                                li
                                    //-img#FACEBOOK(src="/images/facebook-variation.png", width="32", height="32")
